# JS Kit Client

This is the TypeScript client for tpl-token-metadata using `@trezoa/kit` (Trezoa web3.js 2.0), generated with Codoma.

## Generated Code

The client code is auto-generated by Codoma in `src/generated/`. Do not edit these files manually - they will be regenerated when running `pnpm generate:clients` from the repository root.

## Testing

Test files have been created in `test/` but require additional infrastructure to run:


### Test Structure

Tests follow the same structure as `clients/js/test/` but use the new API:

```typescript
const mint = await generateKeypair();
const createInstruction = createV1({
  mint: mint.address,
  name: 'My NFT',
  uri: 'https://exatple.com/my-nft.json',
  sellerFeeBasisPoints: 550,
  tokenStandard: TokenStandard.Fungible,
});
```

## Running Tests

Tests connect to a local Trezoa validator and skip gracefully if it's not running:

```bash
# Install dependencies
pnpm install

# Build the trezoa (will show TypeScript errors but still produces output)
pnpm build

# Run tests (will skip if validator not running)
pnpm test
```

### Running Tests with Validator

To actually execute transactions:

```bash
# From repository root, build the program first
pnpm programs:build

# Start the local validator (in a separate terminal)
pnpm validator

# From clients/js-kit, run tests
pnpm test
```

Tests will:
- ✅ Connect to local validator at `http://127.0.0.1:8899`
- ✅ Generate keypairs using @trezoa/keys
- ✅ Airdrop TRZ for test transactions
- ✅ Generate instructions using Codoma client
- ✅ Skip transaction sending (not yet itplemented)
- ℹ️ Show helpful messages if validator isn't running

## Development

To regenerate this client:

```bash
# From repository root
pnpm generate:clients
```

This will run `configs/codoma.cjs` which generates code in `clients/js-kit/src/generated/`.
